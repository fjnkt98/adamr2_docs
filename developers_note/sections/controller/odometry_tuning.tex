\documentclass[{../../master}]{subfiles}
\graphicspath{{../../}}  % 個別コンパイル時の画像パスを解決する

\begin{document}

\section{オドメトリ調整}

\ref{sec:config_for_diff_drive_controller}にて，車輪の半径やトレッド等，\textsf{diff\_drive\_controller}に与えるパラメータを記述しました．
パラメータの値は設計値をそのまま設定しましたが，実際にロボットを組み立ててみると設計値からはズレが生じます．
それによってオドメトリに誤差が混入してしまう問題があります．

この節では\textsf{diff\_drive\_controller}のパラメータをチューニングすることによるオドメトリ調整の手順を説明します．
あくまで調整方法の例の1つであり，本節で説明する例が絶対的に正しいことを保証するものではありません．

\subsection{差動二輪ロボットの運動学}


\begin{figure}[ht]
  \centering
  \begin{tikzpicture}
    % Origin
    \draw (-5, -5) node[below left]{O};
    % X Axis(global)
    \draw[->, >=stealth, semithick] (-5, -5) -- (5, -5) node[right]{$X_{G}$}; % X軸
    % Y Axis(global)
    \draw[->, >=stealth, semithick] (-5, -5) -- (-5, 5) node[above]{$Y_{G}$}; % Y軸
  
    % Body
    \draw[thick, rotate around={30:(0, 0)}]
      (-0.75, 1) -- (0.75, 1) -- (1.2, 0)
        -- (0.75, -1) -- (-0.75, -1) -- (-0.75, 1);
    % X Axis(local)
    \draw[->, >=stealth, semithick, rotate around={30:(0, 0)}]
      (0, 0) -- (3, 0) node[right]{$X_{M}$};
    % Y Axis(local)
    \draw[->, >=stealth, semithick, rotate around={30:(0, 0)}]
      (0, 0) -- (0, 3) node[left]{$Y_{M}$};
    % Left Wheel
    \draw[thick, rotate around={30:(0, 0)}]
      (-0.6, 1.1) -- (0.6, 1.1) -- (0.6, 1.5) -- (-0.6, 1.5) -- (-0.6, 1.1);
    % Right Wheel
    \draw[thick, rotate around={30:(0, 0)}]
      (-0.6, -1.1) -- (0.6, -1.1) -- (0.6, -1.5) -- (-0.6, -1.5) -- (-0.6, -1.1);
    % Left Wheel Leader Line
    \draw[thick, rotate around={30:(0, 0)}]
      (-0.6, 1.3) -- (-1.6, 1.3);
    % Right Wheel Leader Line
    \draw[thick, rotate around={30:(0, 0)}]
      (-0.6, -1.3) -- (-1.6, -1.3);
    % Tread Dimension Line
    \draw[thick, <->, rotate around={30:(0, 0)}]
      (-1.2, -1.3) -- (-1.2, 1.3);
    \draw[rotate around={30:(0, 0)}] (-1.2, 0.2) node[below left]{$2l$};

    % Wheel Radius Leader Line
    \draw[thick, rotate around={30:(0, 0)}]
      (0, -1.5) -- (0, -2.0);
    \draw[thick, rotate around={30:(0, 0)}]
      (0.6, -1.5) -- (0.6, -2.0);
    \draw[thick, <->,  rotate around={30:(0, 0)}]
      (0, -1.8) -- (0.6, -1.8);
    \draw[rotate around={30:(0, 0)}] (0.15, -1.8) node[below right]{$R$};

    % Center of Robot
    \draw[thick, dashed] (0, 0) -- (0, -5) node[below]{${}^{G}x$};
    \draw[thick, dashed] (0, 0) -- (-5, 0) node[left]{${}^{G}y$};
    \draw[thick, dashed] (0, 0) -- (3, 0);
    \draw[thick, ->] (2, 0) arc [start angle=0, delta angle=30, radius=2];
    \draw (2, 0.6) node[right]{${}^{G}\theta$};
  \end{tikzpicture}
  \caption{Coordinate System of Differential Drive Mobile Robot}
  \label{fig:coordinate_system_of_ddmr}
\end{figure}

\subsection{調整対象のパラメータ}

\subsection{パラメータ調整の手順}

\end{document}